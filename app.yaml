application: liamnewmarch-blog
version: live
runtime: python27
api_version: 1
threadsafe: true

handlers:
# Letâ€™s Encrypt verification.
- url: /.well-known/acme-challenge/(.+)
  static_files: .challenge/\1
  upload: .challenge/(.+)
  mime_type: text/plain
  secure: optional

# Unknown mime types.
- url: /static/(.+\.(map|md|scss))
  static_files: build/static/\1
  upload: build/static/(.+\.(map|md|scss))
  mime_type: text/plain
  secure: always

# Service worker.
- url: /static/js/service-worker\.js
  static_files: build/static/js/service-worker.js
  upload: build/static/js/service-worker\.js
  secure: always
  http_headers:
    Service-Worker-Allowed: /

# Static assets.
- url: /static
  static_dir: build/static/
  secure: always

# Append index.html to folders.
- url: /(.+)/
  static_files: build/\1/index.html
  upload: build/(.+)/index.html
  secure: always

# Handle root index.html.
- url: /
  static_files: build/index.html
  upload: build/index.html
  secure: always

# 404 for unmatched urls.
- url: /.*
  static_files: build/404/index.html
  upload: build/404/index.html
  secure: always

skip_files:
- ^\.git
- ^\.sass-cache
- ^content
- ^grunt
- ^node_modules
- ^static
- ^views
- .*\.pyc
- \.gitignore
- ^Gruntfile.js
- ^package.json
- ^podspec.yaml
- ^README.md
