---
title: Homebrew and npm on OS X
layout: post
---

I work with [npm][npm] and [Homebrew][brew] daily on OS X. Both are responsible for installing system-wide programs in `/usr/local`. Because of this, they can sometimes trip over each other and the permissions of that folder can get a bit confused.

The solution I’ve come up with is to create a single update script for both programs that also repairs folder permissions, just in case. Note: these commands use `sudo` – don’t blindly trust me, read ahead before you copy and paste.

{% highlight bash %}
#!/bin/sh

reset=$(tput sgr0)
green=$(tput setaf 2)

# Update global npm applications
update_npm () {
	echo "${green}Repairing permissions for npm${reset}"
	sudo chown -R $USER /usr/local
	sudo chown -R $USER ~/.npm
	echo "${green}Updating npm${reset}\n"
	sudo npm cache clean
	sudo npm -g update
	echo "\n${green}npm updated${reset}\n"
}

# Update homebrew applications
update_homebrew () {
	echo "${green}Repairing permissions for homebrew${reset}"
	sudo chown -R $USER /usr/local
	echo "${green}Updating homebrew${reset}\n"
	brew update
	brew upgrade
	echo "\n${green}Homebrew updated${reset}"
}


update_npm
update_homebrew
{% endhighlight %}

I personally have this script saved as `~/bin/update`, so for me updating both npm and Homebrew is as simple as running:

{% highlight bash %}
$ update
{% endhighlight %}

[npm]: https://www.npmjs.org
[brew]: http://brew.sh
